# Build files configuration

# Set host system name
HOST="arm-cortex_a9-linux-gnueabi"

# Make all cross builds depend on cross toolchain
CROSS_DEPENDS=native/crosstool-ng

# Set cross sysroot path
CROSS_SYSROOT="$NATIVE_SYSROOT/$HOST/sysroot"

# Add cross toolchain to build environment
PATH="$NATIVE_SYSROOT/bin:$PATH"
PATH="$NATIVE_SYSROOT/usr/bin:$PATH"

# Set number of parallel make jobs
JOBS=`cat /proc/cpuinfo | grep processor | wc -l`

# Add this environment for cross builds only
cross_env()
{
   # Pkg-config cross configuration
   export PKG_CONFIG_DIR=
   export PKG_CONFIG_SYSROOT_DIR="$CROSS_SYSROOT"
   export PKG_CONFIG_LIBDIR="$CROSS_SYSROOT/usr/lib/pkgconfig:$CROSS_SYSROOT/usr/share/pkgconfig"
   export PKG_CONFIG_PATH="$CROSS_SYSROOT/usr/lib/pkgconfig"
}

# Add this environment for native builds only
native_env()
{
   # Pkg-config native configuration
   export PKG_CONFIG_DIR=
   export PKG_CONFIG_SYSROOT_DIR="$NATIVE_SYSROOT"
   export PKG_CONFIG_LIBDIR="$NATIVE_SYSROOT/usr/lib/pkgconfig:$NATIVE_SYSROOT/usr/share/pkgconfig"
   export PKG_CONFIG_PATH="$NATIVE_SYSROOT/usr/lib/pkgconfig"
}

# Tool check function
check_tool()
{
   type $1 &> /dev/null
   if [ $? != 0 ]; then
      echo "Failed ($1 is not found)"
      exit 1
   fi
}

# Library check function
check_lib()
{
   test -e $1 &> /dev/null
   if [ $? != 0 ]; then
      echo "Failed ($1 is not found)"
      exit 1
   fi
}
